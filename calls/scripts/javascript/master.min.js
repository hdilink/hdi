$(document).ready(function(){$("#menu_tab").tabs({beforeLoad:function(j,k){k.jqXHR.error(function(){$("#footer").css({"border-top":"none"});k.panel.html("<div class='outer_pad'><div class='inner_pad gray white_shadow text_light'><b>Oops!</b> Unable to load this page at the moment. Please, try again.</div></div>")});var l=k.panel.selector,i=l.slice(1);$("ul.ui-tabs-nav li").each(function(){if($(this).attr("aria-controls")==i){$(this).children("a").attr("href",l)}})}});var e=[{title:"patients",file:"patients"},{title:"day sheet",file:"day_sheet"}];$init.default_tabs(e);var d=$("div#menu > ul > li"),c=$("div#menu > ul > li > ul > li"),b=$("div#menu > ul > li > ul > li > ul > li"),g="&#9660;",f="&#9650;",a="&#9668;",h="&#9658;";d.find("ul").hide();$("div#menu > ul > li").has("ul").children("a").append("&nbsp;&nbsp;"+g);d.on("mouseenter",function(){$(this).children("a").css({"background-color":"#555",color:"#FFF"});$(this).children("ul").show()});d.on("mouseleave",function(){$(this).children("a").css({"background-color":"transparent",color:"#888"});$(this).children("ul").hide()});c.has("ul").children("a").append("&nbsp;&nbsp;<span class='r_float'>"+h+"</span>");c.on("mouseenter",function(){$(this).children("a").css({"background-color":"#555",color:"#FFF"});$(this).children("ul").show()});c.on("mouseleave",function(){$(this).children("a").css({"background-color":"transparent",color:"#888"});$(this).children("ul").hide()});$("#ui_header div ul li a").on("click",function(i){i.preventDefault()});$(window).on("resize",function(){$init.height_balance();if($ui_engine.config.status!="maximized"){clearTimeout($.data(this,"delay"));$.data(this,"delay",setTimeout(function(){$ui_engine.preload_ui()},250))}});$(window).on("scroll",function(){if($ui_engine.config.status!="maximized"){clearTimeout($.data(this,"delay"));$.data(this,"delay",setTimeout(function(){$ui_engine.preload_ui()},250))}})});var $init={height_balance:function(){var d=$("li.ui-state-active").children("a").attr("href"),c=$(window).height(),b=$("#footer").outerHeight(),e=$(d+" > .sub_wrapper").offset().top,a=c-b-e;$(".side_kick, .component, .tips").height(a-44)},default_tabs:function(b){var a=0,c=b.length;$tab_engine.open_tab({div:"#menu_tab",title:b[a]["title"],file:b[a]["file"]});if(c>1){a++;var d=self.setInterval(function(){$tab_engine.open_tab({div:"#menu_tab",title:b[a]["title"],file:b[a]["file"]});if((c-1)>a){a++}else{d=window.clearInterval(d)}},800)}},equalize_heights:function(f){var b=f.length;if(b>1){var e=0,a=0;for(var d=0;d<b;d++){a=$(f[d]).height();if(a>e){e=a}}for(var c=0;c<b;c++){$(f[c]).height(e)}}}},$date_engine={get_age:function(a,c){if(a!=""){var f=this.get_current_date(),i=a,g=i.split("/"),h=g[2]+"/"+g[1]+"/"+g[0],e=new Date(f),d=new Date(h),b=this.year_diff(e,d);$(c).val(b)}},get_dob:function(b,a){if(b!=""){clearTimeout($.data(this,"delay"));$.data(this,"delay",setTimeout(function(){var d=$date_engine.get_current_date(),e=new Date(d),c=e.getFullYear()-b;$(a).val("01/01/"+c)},800))}},get_current_date:function(){var a=new Date(),b=a.getDate(),e=a.getMonth()+1,d=a.getFullYear(),c="";if((e>9)&&(b<10)){c=d+"-"+e+"-0"+b}else{if((e<10)&&(b>9)){c=d+"-0"+e+"-"+b}else{if((e<10)&&(b<10)){c=d+"-0"+e+"-0"+b}else{c=d+"-"+e+"-"+b}}}return c},first_day:function(b){var a=new Date(b.getFullYear(),b.getMonth(),1);return a.getDate()},last_day:function(b){var a=new Date(b.getFullYear(),b.getMonth()+1,0);return a.getDate()},year_diff:function(c,e){var d=c.getFullYear(),b=e.getFullYear(),a=d-b;return a},month_diff:function(b,e){var d=b.getMonth()+1,a=e.getMonth()+1,c=d-a;return c},day_diff:function(c,g){var e=c.getDate(),f=this.last_day(c),b=g.getDate(),d=this.last_day(g),a;if(c.getMonth()==g.getMonth()){a=c.getDate()-g.getDate()}else{if(c.getMonth()>g.getMonth()){a=e+(d-b)}else{a=(e-f)-b}}return a}},$ui_engine={block:function(a){$.extend(this.config,a);$("#ui_title").html(this.config.title);$("#ui_content").load("../calls/includes/ui_blocker/"+this.config.file+".php");this.preload_ui();$("#ui_bg").fadeIn("slow",function(){$("#ui").fadeIn("fast")})},config:{title:"Application",file:"default",width:"600",height:"400",status:"default",buttons:"YYY"},close:function(){$("#ui").fadeOut("slow",function(){$("#ui_bg").fadeOut("fast");var a=$("#ui ul li").eq(1).children("a");a.css({"background-position":"-33px 0"});a.attr("title","Maximize");$ui_engine.config.status="default"})},toggle_size:function(){if(this.config.status=="default"){$("#ui").animate({width:$("#ui_bg").width(),height:$("#ui_bg").height(),top:"0",left:"0"},function(){var c=$("#ui ul li").eq(1).children("a");c.css({"background-position":"-99px 0"});c.attr("title","Restore Down");$ui_engine.config.status="maximized"})}else{if(this.config.status=="maximized"){this.cleanup_size();var b,a;b=(($(window).width()/2)-(this.config.width/2)),a=(($(window).height()/2)-(this.config.height/2));$("#ui").animate({width:this.config.width,height:this.config.height,top:a,left:b},function(){var c=$("#ui ul li").eq(1).children("a");c.css({"background-position":"-33px 0"});c.attr("title","Maximize");$ui_engine.config.status="default"})}}},toggle_fold:function(){alert("minimize?")},cleanup_size:function(){if(this.config.width<400){this.config.width=400}if(this.config.height<100){this.config.height=100}},preload_ui:function(){var d=$("#ui ul li").eq(1).children("a");d.css({"background-position":"-33px 0"});d.attr("title","Maximize");$ui_engine.config.status="default";this.preload_buttons();var c,a,b=$("#ui");this.cleanup_size();b.css({width:this.config.width+"px",height:this.config.height+"px"});c=(($(window).width()/2)-(b.outerWidth()/2)),a=(($(window).height()/2)-(b.outerHeight()/2))+$(window).scrollTop();b.animate({left:c+"px",top:a+"px",position:"absolute"})},draggable:function(a){a=$(a);var b=function(f){if(a.data("mouseMove")){var c=f.clientX-a.data("mouseX");var g=f.clientY-a.data("mouseY");var e=parseInt(a.css("left"))+c;var d=parseInt(a.css("top"))+g;a.css("left",e);a.css("top",d);a.data("mouseX",f.clientX);a.data("mouseY",f.clientY)}};a.mousedown(function(c){a.data("mouseMove",true);a.data("mouseX",c.clientX);a.data("mouseY",c.clientY)});a.parents(":last").mouseup(function(){a.data("mouseMove",false)});a.mouseout(b);a.mousemove(b)},preload_buttons:function(){var b=this.config.buttons;$min=b[0];$max=b[1];$close=b[2];if($min=="N"){var d=$("#ui ul li").eq(0).children("a");d.css({"background-position":"0 30px",cursor:"default"});d.attr({title:"",onclick:""})}if($max=="N"){var a=$("#ui ul li").eq(1).children("a");a.css({"background-position":"-33px 30px",cursor:"default"});a.attr({title:"",onclick:"return false"})}if($close=="N"){var c=$("#ui ul li").eq(2).children("a");c.css({"background-position":"-66px 30px",cursor:"default"});c.attr({title:"",onclick:""})}}},$tab_engine={open_tab:function(a){$.extend(this.config,a);this.create_tab()},init:function(){$tabs=$(this.config.div).tabs();$tabs.tabs("refresh");return $tabs},config:{div:"#div",title:"New Title",content:"",file:"",id_number:0,counter:0},activate_tab:function(a){$tabs=this.init();$tabs.tabs("option","active",(a-1))},close_tab:function(d){this.config.counter--;var f=$(d).parent("a").attr("href"),b=f.split("-"),c=b[b.length-1],a=this.init();var e=$(d).closest("li").remove().attr("aria-controls");$("#"+e).remove();this.activate_tab(c);$init.height_balance()},create_tab:function(){var b=this.init(),a=this.config.title.toUpperCase(),d=0,f=true;$("ul.ui-tabs-nav > li > a").each(function(){if($(this).children("span").eq(0).text()==a){var i=$(this).attr("href"),g=i.split("-"),h=g[g.length-1];b.tabs("option","active",(d));b.tabs("refresh");f=false;$init.height_balance()}d++});if(f){var c="../calls/includes/tabs/"+this.config.file+".php",e=this.config.counter;$li="<li><a href='"+c+"'><span>"+a+"</span>&nbsp;&nbsp;<span class='close' title='Close this tab' onclick='javascript:$tab_engine.close_tab(this);' style='font-weight:bold;padding:2px 3px;cursor:pointer;'>&#215;</span></a></li>";b.find("ul.ui-tabs-nav").append($li);b.tabs("refresh");b.tabs("option","active",e);b.tabs("option","load",e);this.config.counter++;$("#menu_tab .close").css({color:"#333"});$("#menu_tab .close").on("mouseenter",function(){$(this).css({color:"red"})});$("#menu_tab .close").on("mouseleave",function(){$(this).css({color:"#333"})})}}},$file_loader={load:function(a){var c=$("li.ui-state-active").children("a").attr("href"),b="../calls/includes/tabs/"+a+".php";$(c+" > .sub_wrapper .component").load(b)}};$safe_logout={exit:function(a){$.ajax({url:"../calls/includes/switch.php",type:"POST",data:{opt:"exit"},dataType:"json",success:function(b){if(b.status=="true"){$("#login_msg").html("<span class='green_bg white msg'>"+b.msg+"</span>");a.submit()}else{$("#login_msg").html("<span class='red_bg white msg'>"+b.msg+"</span>")}},error:function(d,b,c){$("#login_msg").html("<span class='red_bg white msg'><b>LOGOUT ERROR:</b> Please, Try Again.</span>")}})},backup:function(a){alert($(a).serialize());alert(a.logout_btn.value)}},$validator={activate:function(a){for(var b=0;b<a.length;b++){$(a[b].name).prop("validate",a[b].type)}},show_tooltip:function(a){a[0].caller.closest(".fieldset").find(".tooltip").css({position:"absolute",display:"block",top:a[0].top,left:a[0].left});$(".tooltip span").html(a[0].msg)},hide_tooltip:function(){$(".tooltip").css({position:"absolute",display:"none",top:0,left:0})}};$operator={call:function(a){if((a.is_tab=="N")&&(a.has_child=="N")){if(a.title=="Log Out"){backup_blocker()}else{if(a.title=="Toggle Shortcuts"){this.toggle_display("#shortcut_menu")}}}else{if((a.is_tab=="Y")&&(a.has_child=="N")){a.file=a.title.split(" ").join("_").toLowerCase();$tab_engine.open_tab(a)}}},toggle_display:function(a){if($(a).is(":hidden")){$(a).show()}else{$(a).hide()}$init.height_balance()}};